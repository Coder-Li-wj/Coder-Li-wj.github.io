---
layout:     post
title:      "正则表达式"
subtitle:   "介绍正则表达式的基本语法"
date:       2020-06-22 11:37：00
author:     "Coder-Li-wj"
header-img: "img/regexp/header.jpg"
tags:       正则表达式
---  

#### 新建正则表达式的方法  
1. 使用字面量，以斜杠表示开始和结束（常用！ 效率高，便利且直观）  
```js
var regexp = /xyz/;
```  
2. 使用`RegExp`构造函数  
```js
var regexp = new RegExp('xyz');
```  

#### 实例属性  
1. 修饰符： 
> 1) `i`： 执行对大小写不敏感的匹配（忽略字母大小写）；  
> 2) `g`： 执行全局匹配；  
> 3) `m`： 执行多行匹配。  
2. 其他：  
> 1) `lastIndex`: 返回一个数值，表示下一次开始搜索的位置。该属性可读写，但是只在进行连续搜索时有意义;  
> 2) `source`: 返回正则表达式的字符串形式（不包括反斜杠）。  

#### 实例方法  
1. **`test()`：表示当前模式是否能匹配参数字符串，返回一个布尔值；**  
```js
/cat/.test('cats and dogs')  //true
```  
PS: 如果正则表达式带有g修饰符，则每一次test方法都从上一次结束的位置开始向后匹配  

2. **`exec`：该方法用来返回匹配结果。如果发现匹配，就返回一个数组，成员是匹配成功的子字符串，否则返回null。**  
```js
/x/.exec('_x_x') // ["x"]
/y/.exec('_x_x)  // null
```  
另外，如果正则表示式包含圆括号（即含有“组匹配”），则返回的数组会包括多个成员。第一个成员是整个匹配成功的结果，后面的成员就是圆括号对应的匹配成功的组。也就是说，第二个成员对应第一个括号，第三个成员对应第二个括号，以此类推。整个数组的length属性等于组匹配的数量再加1。  
```js
var s = '_x_x';
var r = /_(x)/;
r.exec(s) // ["_x", "x"]
```  
`exec`方法的返回数组还包含两个属性：  
>input： 整个原字符串。  
>index： 整个模式匹配成功的开始位置（从0开始计数）。  
```js
var r = /a(b+)a/;
var arr = r.exec('_abbba_aba_');
arr // ["abbba", "bbb"]
arr.input // "_abbba_aba_"
arr.index // 1
```  

#### 匹配规则  
1. **字面量字符和元字符**  
1) 如果在正则表达式之中，某个字符只表示它字面的含义，那么它们就叫做“字面量字符”；    
2) 还有一部分字符有特殊含义，不代表字面的意思。它们叫做“元字符”  
>a、`点字符(.)`：点字符（.）匹配除回车（\r）、换行(\n) 、行分隔符（\u2028）和段分隔符（\u2029）以外的所有字符。
>```js 
>/.t/ // c.t匹配c和t之间包含任意一个字符的情况，只要这三个字符在同一行，比如cat、c2t、c-t等等，但是不匹配coot
>```  
>b、`位置字符`： 位置字符用来提示字符所处的位置，主要有两个字符  
>>`^`: 表示字符串的开始位置  
>>`$`: 表示字符串的结束位置   
>
>c、`选择符（|）`：竖线符号（|）在正则表达式中表示“或关系”（OR），即cat|dog表示匹配cat或dog  
>多个选择符可以联合使用。
>选择符会包括它前后的多个字符，比如/ab|cd/指的是匹配ab或者cd，而不是指匹配b或者c。如果想修改这个行为，可以使用圆括号。  

2. **转义符**  
正则表达式中那些有特殊含义的元字符，如果要匹配它们本身，就需要在它们前面要加上反斜杠。  
正则表达式中，需要反斜杠转义的，一共有12个字符：`^`、`.`、`[`、`$`、`(`、`)`、`|`、`*`、`+`、`?`、`{`和`\\`。需要特别注意的是，如果使用RegExp方法生成正则对象，转义需要使用`两个斜杠`，因为字符串内部会先转义一次。  
3. **特殊字符**  
>\cX 表示Ctrl-[X]，其中的X是A-Z之中任一个英文字母，用来匹配控制字符。  
>[\b] 匹配退格键(U+0008)，不要与\b混淆。  
>\n 匹配换行键。  
>\r 匹配回车键。  
>\t 匹配制表符 tab（U+0009）。  
>\v 匹配垂直制表符（U+000B）。  
>\f 匹配换页符（U+000C）。  
>\0 匹配null字符（U+0000）。  
>\xhh 匹配一个以两位十六进制数（\x00-\xFF）表示的字符。  
>\uhhhh 匹配一个以四位十六进制数（\u0000-\uFFFF）表示的 Unicode 字符。  
4. **字符类**  
**字符类（class）表示有一系列字符可供选择，只要匹配其中一个就可以了。所有可供选择的字符都放在方括号内，比如[xyz] 表示x、y、z之中任选一个匹配。**  
1) `脱字符(^)`：如果方括号内的第一个字符是[^]，则表示除了字符类之中的字符，其他字符都可以匹配。比如，[^xyz]表示除了x、y、z之外都可以匹配。  
>如果方括号内没有其他字符，即只有[^]，就表示匹配一切字符，其中包括换行符。  
>脱字符只有在字符类的第一个位置才有特殊含义，否则就是字面含义。  
2)`连字符(-)`：某些情况下，对于连续序列的字符，连字符（-）用来提供简写形式，表示字符的连续范围。比如，[abc]可以写成[a-c]，[0123456789]可以写成[0-9]，同理[A-Z]表示26个大写字母。  
>另外，不要过分使用连字符，设定一个很大的范围，否则很可能选中意料之外的字符。  
5. **预定义模式， 指的是某些常见模式的简写方式。**  
>\d 匹配0-9之间的任一数字，相当于[0-9]。  
>\D 匹配所有0-9以外的字符，相当于[^0-9]。  
>\w 匹配任意的字母、数字和下划线，相当于[A-Za-z0-9_]。  
>\W 除所有字母、数字和下划线以外的字符，相当于[^A-Za-z0-9_]。  
>\s 匹配空格（包括换行符、制表符、空格符等），相等于[ \t\r\n\v\f]。  
>\S 匹配非空格的字符，相当于[^ \t\r\n\v\f]。  
>\b 匹配词的边界。  
>\B 匹配非词边界，即在词的内部。  
6. **重复类**  
**模式的精确匹配次数，使用大括号（{}）表示。{n}表示恰好重复n次，{n,}表示至少重复n次，{n,m}表示重复不少于n次，不多于m次。**  
```js
/lo{2}k/.test('look') // true
/lo{2,5}k/.test('looook') // true
```  
7. **量词符，量词符用来设定某个模式出现的次数**  
>`?` 问号表示某个模式出现0次或1次，等同于{0, 1}。  
>`*` 星号表示某个模式出现0次或多次，等同于{0,}。  
>`+` 加号表示某个模式出现1次或多次，等同于{1,}。  
8. **修饰符，表示模式的附加规则，放在正则模式的最尾部。**  
修饰符可以单个使用，也可以多个一起使用。  
1）`g 修饰符`：默认情况下，第一次匹配成功后，正则对象就停止向下匹配了。g修饰符表示全局匹配（global），加上它以后，正则对象将匹配全部符合条件的结果，主要用于搜索和替换。  
2）`i 修饰符`：默认情况下，正则对象区分字母的大小写，加上i修饰符以后表示忽略大小写。
3）`m 修饰符`：m修饰符表示多行模式，会修改^和$的行为。默认情况下（即不加m修饰符时），^和$匹配字符串的开始处和结尾处，加上m修饰符以后，^和$还会匹配行首和行尾，即^和$会识别换行符（\n）。  
```js
/world$/.test('hello world\n') // false
/world$/m.test('hello world\n') // true
//上面的代码中，字符串结尾处有一个换行符。如果不加m修饰符，匹配不成功，因为字符串的结尾不是world；加上以后，$可以匹配行尾。
```  
