---
layout:     post
title:      "开发记录"
subtitle:   "CSS开发中遇到的问题，持续更新..."
author:     "Coder-Li-wj"
header-img: "img/es6/es6.jpg"
tags:       CSS
---

**1、CSS 媒体查询 `prefers-color-scheme` 跟随系统深浅主题切换页面颜色**
第一种：直接使用CSS的方法。
```css
/* 当系统变为暗主题时也自动变为暗主题，无需人工干预 */
@media (prefers-color-scheme: dark) {
  /* Dark Mode Styles */
}
```
第二种：使用js，利用matchMedia函数。
> `matchMedia()` 返回一个新的 `MediaQueryList` 对象，表示指定的媒体查询字符串解析后的结果

```js
const media = window.matchMedia('(prefers-color-scheme: dark)');
if(media.matchs){
    setDark();
}else{
    setLight();
}
//全局监听media变化
media.addEventListener('change', (e) => {
    if (e.matches) {
        setDark();
    } else {
        setLight();
    }
})
```
第三种：`Android` 企业微信客户端暂不支持媒体查询，可以改用 `User-Agent` 进行判断。
```js
if (/ColorScheme\/Dark/i.test(navigator.userAgent)) {
  /* Dark Mode Logic */
}
```
[参考链接](https://developer.work.weixin.qq.com/document/path/94555)

--------------------------------------------------------------------------------------------------

**2、`@media (any-hover: hover)`any-hover判断设备是否支持鼠标经过行为**
`none`: 没有什么输入装置可以实现hover悬停，即没有鼠标输入设备
`hover`: 一个或多个输入装置可以触发元素的hover悬停交互，即支持鼠标设备

适用场景：在移动端和PC端通用一个按钮，需要给按钮悬停效果，这是PC的hover就不适合移动端了，就可以借助any-hover来为移动端做单独的效果优化体验。
[参考链接](https://blog.csdn.net/wuchen092832/article/details/107828381)

--------------------------------------------------------------------------------------------------

**3、CSS  `filter`属性**
> CSS 属性 filter 将模糊或颜色偏移等图形效果应用于元素。滤镜通常用于调整图像、背景和边框的渲染。
> 简单来说，filter 属性就是用来给元素添加不同的滤镜。


```css
//属性值集合
//blur()：用于设置元素模糊效果， 它将高斯模糊视觉效果应用于元素。
filter: blur(0|2px|5px);
//brightness()：用于调整图像的亮度级别，使其看起来更亮或更暗。
filter: brightness(50%|100%|200%);
//contrast()：contrast() 函数用于调整图像的对比度，也就是调整图像最暗和最亮部分之间的亮度差异 。
filter: contrast(50%|100%|200%);
//opacity()：将透明效果应用于图像。
filter: opacity(10%|40%|80%);
//sepia()：可以为图像添加柔和的褐色色调，使图像看起来更温暖、更复古。
filter: sepia(10%|40%|80%);
//drop-shadow()：用于增加图像的阴影，和 box-shadow 的作用类似，使图像看起来更加立体。
filter: drop-shadow(4px 4px 10px yellow);
//saturate()：用于改变元素中颜色的饱和度。
filter: saturate(10%|150%|350%);
//grayscale()：对图片进行灰度转换。
filter: grayscale(0|0.5|1);

//filter 属性支持设置多个滤镜，CSS 会根据它们出现的顺序将它们应用于元素
filter: opacity(50%) drop-shadow(20px 10px 0px black);
```
[参考链接](https://blog.csdn.net/sshuai131400/article/details/128444828)

--------------------------------------------------------------------------------------------------

**4、实现网页变灰色**
使用CSS 的`filter`属性中的grayscale()函数。
方法一：把它放在` <html> `标签的样式里
```CSS
html {
  filter: grayscale(1);
  -webkit-filter: grayscale(1);
  -moz-filter: grayscale(1);
  -ms-filter: grayscale(1);
  -o-filter: grayscale(1);
}
```
方法二：用内联样式，只要没用 important CSS 语法，内联样式优先级最高
```html
<html style="filter:grayscale(1);-webkit-filter: grayscale(1);">
...
</html>
```
[参考链接](https://juejin.cn/post/7172039729603412004)

--------------------------------------------------------------------------------------------------

**5、less全局引入样式变量**
安装style样式资源处理器
`npm i style-resources-loader`
`npm i vue-cli-plugin-style-resources-loader`
在`vue.config.js`文件上配置
```css
//引入path
const path = require('path');
module.exports = {
  pluginOptions: {
    'style-resources-loader': {
      preProcessor: 'less',
      patterns: [path.resolve(__dirname, "src/style/globalValue.less")]
    }
  }
}
```
--------------------------------------------------------------------------------------------------

**6、tabindex属性-键盘Tab聚焦**

> 1、tabindex属性是一个与键盘Tab键聚焦相关的属性;
> 2、tabindex属性值是一个整数，它来决定被Tab键focus的顺序，顺序越小越先被focus;
> 3、但是tabindex属性值为 0 时，被focus的顺序是最后的;
> 4、tabindex属性值为负数时，键盘的Tab键不能focus。

例子：`<input tabindex="1"></input>`

--------------------------------------------------------------------------------------------------

**7、文字溢出打点**
```css
//单行
white-space: nowrap;
text-overflow: ellipsis;
word-break: break-all;
overflow: hidden;

//两行
display: -webkit-box;
-webkit-line-clamp: 2;
-webkit-box-orient: vertical;
white-space: normal;
text-overflow: ellipsis;
overflow: hidden;
```
--------------------------------------------------------------------------------------------------

**8、transform对fixed的影响**

子元素设置了`fixed`定位，是相对于浏览器窗口定位，如果其父元素设置了`transform`，则会变成相对于父元素定位。

作用：子元素设置`fixed`定位并作为一个组件引入到A页面，如果其父元素没有设置`transform`，那么该子元素会覆盖A页面中的其他元素。

> 如果定位不想被影响，可以替换使用`sticky`

--------------------------------------------------------------------------------------------------
